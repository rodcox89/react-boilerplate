{"version":3,"sources":["../src/DebounceInput.js"],"names":[],"mappings":"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","file":"DebounceInput.js","sourcesContent":["import React from 'react';\nimport debounce from 'lodash.debounce';\nimport {shouldComponentUpdate} from 'react/lib/ReactComponentWithPureRenderMixin';\n\n\nconst DebounceInput = React.createClass({\n  propTypes: {\n    onChange: React.PropTypes.func.isRequired,\n    onKeyDown: React.PropTypes.func,\n    value: React.PropTypes.string,\n    minLength: React.PropTypes.number,\n    debounceTimeout: React.PropTypes.number,\n    forceNotifyByEnter: React.PropTypes.bool\n  },\n\n\n  getDefaultProps() {\n    return {\n      minLength: 0,\n      debounceTimeout: 100,\n      forceNotifyByEnter: true\n    };\n  },\n\n\n  getInitialState() {\n    return {\n      value: this.props.value || ''\n    };\n  },\n\n\n  componentWillMount() {\n    this.createNotifier(this.props.debounceTimeout);\n  },\n\n\n  componentWillReceiveProps({value, debounceTimeout}) {\n    if (typeof value !== 'undefined' && this.state.value !== value) {\n      this.setState({value});\n    }\n    if (debounceTimeout !== this.props.debounceTimeout) {\n      this.createNotifier(debounceTimeout);\n    }\n  },\n\n\n  shouldComponentUpdate,\n\n\n  componentWillUnmount() {\n    if (this.notify.cancel) {\n      this.notify.cancel();\n    }\n  },\n\n\n  createNotifier(debounceTimeout) {\n    if (debounceTimeout < 0) {\n      this.notify = () => null;\n    } else if (debounceTimeout === 0) {\n      this.notify = this.props.onChange;\n    } else {\n      this.notify = debounce(this.props.onChange, debounceTimeout);\n    }\n  },\n\n\n  forceNotify(event) {\n    if (this.notify.cancel) {\n      this.notify.cancel();\n    }\n\n    const {value} = this.state;\n    const {minLength, onChange} = this.props;\n\n    if (value.length >= minLength) {\n      onChange(event);\n    } else {\n      onChange({...event, target: {...event.target, value}});\n    }\n  },\n\n\n  onChange(event) {\n    event.persist();\n\n    const oldValue = this.state.value;\n\n    this.setState({value: event.target.value}, () => {\n      const {value} = this.state;\n\n      if (value.length >= this.props.minLength) {\n        this.notify(event);\n        return;\n      }\n\n      // If user hits backspace and goes below minLength consider it cleaning the value\n      if (oldValue.length > value.length) {\n        this.notify({...event, target: {...event.target, value: ''}});\n      }\n    });\n  },\n\n\n  render() {\n    const {onChange, value: v, minLength,\n      debounceTimeout, forceNotifyByEnter, ...props} = this.props;\n    const onKeyDown = forceNotifyByEnter ? {\n      onKeyDown: event => {\n        if (event.key === 'Enter') {\n          this.forceNotify(event);\n        }\n        // Invoke original onKeyDown if present\n        if (this.props.onKeyDown) {\n          this.props.onKeyDown(event);\n        }\n      }\n    } : {};\n\n    return (\n      <input type=\"text\"\n        {...props}\n        value={this.state.value}\n        onChange={this.onChange}\n        {...onKeyDown} />\n    );\n  }\n});\n\n\nexport default DebounceInput;\n"]}